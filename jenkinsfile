pipeline {
  agent any

  environment {
    TF_VAR_key_pair_name = 'my-key-pair'
    AWS_DEFAULT_REGION = 'us-east-1'
  }

  stages {
    stage('Terraform Apply') {
      steps {
        sh '''
          cd terraform/
          terraform init -reconfigure
          terraform plan
          terraform validation
          terraform apply -auto-approve
        '''
      }
    }


  }
}